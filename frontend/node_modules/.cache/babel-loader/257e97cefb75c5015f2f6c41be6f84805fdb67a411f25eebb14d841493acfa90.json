{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\david\\\\Documents\\\\anime_website\\\\anime_website\\\\frontend\\\\src\\\\pages\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState, useCallback, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport axiosInstance from '../utils/axiosConfig';\nimport profileStyles from '../styles/pages/Profile.module.css';\nimport data from '../Context/ContextApi';\nimport { useAnimeContext } from '../Context/AnimeContext';\nimport { useMangaContext } from '../Context/MangaContext';\nimport { fetchWithErrorHandling } from '../utils/apiUtils';\nimport UserAnimeCard from '../cards/userAnimeCard';\nimport MangaCard from '../cards/MangaCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  var _userData$username, _userData$animes, _userData$mangas;\n  const {\n    animeList\n  } = useAnimeContext();\n  const {\n    mangaList\n  } = useMangaContext();\n  const {\n    userData\n  } = useContext(data);\n  const [mediaType, setMediaType] = useState('anime');\n  const [statusType, setStatusType] = useState('watching');\n  const [userAnimeList, setUserAnimeList] = useState([]);\n  const [userMangaList, setUserMangaList] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [gridLayout, setGridLayout] = useState('grid');\n  const [error, setError] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedGenres, setSelectedGenres] = useState([]);\n  const [showAllStatuses, setShowAllStatuses] = useState(true);\n  const changeLayout = layout => setGridLayout(layout);\n  const fetchUserList = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const data = await fetchWithErrorHandling(`/users/${userData._id}/current`);\n      setUserAnimeList(data.animes);\n      setUserMangaList(data.mangas);\n    } catch (error) {\n      setError('Failed to load user list. Please try again later.');\n      setUserAnimeList([]);\n      setUserMangaList([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userData._id]);\n  useEffect(() => {\n    if (userData._id && animeList !== null && animeList !== void 0 && animeList.length && mangaList !== null && mangaList !== void 0 && mangaList.length) {\n      fetchUserList();\n    }\n  }, [userData._id, animeList, mangaList, fetchUserList]);\n  const getMediaById = useCallback((mediaId, type) => {\n    return type === 'anime' ? animeList === null || animeList === void 0 ? void 0 : animeList.find(anime => anime._id === mediaId) : mangaList === null || mangaList === void 0 ? void 0 : mangaList.find(manga => manga._id === mediaId);\n  }, [animeList, mangaList]);\n  const filteredMediaList = useMemo(() => {\n    const list = mediaType === 'anime' ? userAnimeList : userMangaList;\n    if (!list.length) return [];\n    const statusMap = {\n      'watching': mediaType === 'anime' ? 'Watching' : 'Reading',\n      'planning': 'Planning',\n      'completed': 'Completed'\n    };\n    return list.filter(item => item.status === statusMap[statusType]).map(item => ({\n      ...item,\n      mediaDetails: getMediaById(mediaType === 'anime' ? item.animeId : item.mangaId, mediaType)\n    }));\n  }, [userAnimeList, userMangaList, statusType, getMediaById, mediaType]);\n  const handleProgressUpdate = async (id, newProgress) => {\n    const isAnime = mediaType === 'anime';\n    const currentList = isAnime ? userAnimeList : userMangaList;\n    const currentItem = currentList.find(item => isAnime ? item.animeId === id : item.mangaId === id);\n    if (!currentItem) return;\n    const updateList = isAnime ? setUserAnimeList : setUserMangaList;\n    const progressField = isAnime ? 'currentEpisode' : 'currentChapter';\n    try {\n      updateList(prevList => prevList.map(item => (isAnime ? item.animeId : item.mangaId) === id ? {\n        ...item,\n        [progressField]: newProgress\n      } : item));\n      const endpoint = isAnime ? `/users/${userData._id}/updateAnime` : `/users/${userData._id}/updateManga`;\n      await axiosInstance.post(endpoint, {\n        [isAnime ? 'animeId' : 'mangaId']: id,\n        status: currentItem.status,\n        [progressField]: newProgress,\n        ...(isAnime ? {} : {\n          currentVolume: currentItem.currentVolume\n        })\n      });\n    } catch (error) {\n      setError(`Failed to update ${mediaType} progress. Please try again.`);\n      // Revert the optimistic update\n      fetchUserList();\n    }\n  };\n  const filterMedia = item => {\n    const mediaDetails = getMediaById(mediaType === 'anime' ? item.animeId : item.mangaId, mediaType);\n    if (!mediaDetails) return false;\n    const title = getTitle(mediaDetails.titles).toLowerCase();\n    const matchesSearch = searchQuery === '' || title.includes(searchQuery.toLowerCase());\n    const matchesGenres = selectedGenres.length === 0 || selectedGenres.every(genre => {\n      var _mediaDetails$genres;\n      return (_mediaDetails$genres = mediaDetails.genres) === null || _mediaDetails$genres === void 0 ? void 0 : _mediaDetails$genres.some(g => g.toLowerCase() === genre.toLowerCase());\n    });\n    return matchesSearch && matchesGenres;\n  };\n  const organizedMediaList = useMemo(() => {\n    const list = mediaType === 'anime' ? userAnimeList : userMangaList;\n    if (!list.length) return {};\n    const filtered = list.filter(filterMedia);\n    return filtered.reduce((acc, item) => {\n      const status = item.status;\n      if (!acc[status]) {\n        acc[status] = [];\n      }\n      acc[status].push(item);\n      return acc;\n    }, {});\n  }, [userAnimeList, userMangaList, mediaType, searchQuery, selectedGenres]);\n  const statusOrder = [mediaType === 'anime' ? 'Watching' : 'Reading', 'Completed', 'Planning'];\n  const getTitle = titles => {\n    const preference = userData.title || 'english';\n    const titleMap = {\n      'english': titles.english,\n      'romaji': titles.romaji,\n      'native': titles.native\n    };\n    return titleMap[preference] || titles.english || titles.romaji || titles.native;\n  };\n  const renderLayoutControls = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: profileStyles.layoutControls,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => changeLayout('grid'),\n      className: profileStyles.layoutButton,\n      children: \"Grid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => changeLayout('wide'),\n      className: profileStyles.layoutButton,\n      children: \"Wide\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => changeLayout('compact'),\n      className: profileStyles.layoutButton,\n      children: \"Compact\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n\n  // return (\n  //   <div className={profileStyles.profilePage}>\n  //     <div className={profileStyles.profileHeader}>\n  //       <div className={profileStyles.userInfo}>\n  //         <div className={profileStyles.avatarContainer}>\n  //           <div className={profileStyles.avatar}>\n  //             {userData.username?.charAt(0).toUpperCase()}\n  //           </div>\n  //         </div>\n  //         <div className={profileStyles.userDetails}>\n  //           <h1>{userData.username}</h1>\n  //           <p>Member since {new Date(userData.createdAt).toLocaleDateString()}</p>\n  //         </div>\n  //       </div>\n  //       <div className={profileStyles.statsContainer}>\n  //         <div className={profileStyles.statCard}>\n  //           <h3>Anime Stats</h3>\n  //           <div className={profileStyles.statValue}>\n  //             {userData.animes?.length || 0} Total\n  //           </div>\n  //         </div>\n  //         <div className={profileStyles.statCard}>\n  //           <h3>Manga Stats</h3>\n  //           <div className={profileStyles.statValue}>\n  //             {userData.mangas?.length || 0} Total\n  //           </div>\n  //         </div>\n  //       </div>\n  //     </div>\n\n  //     <div className={profileStyles.contentSection}>\n  //       <div className={profileStyles.controls}>\n  //         <div className={profileStyles.tabContainer}>\n  //           <button\n  //             className={`${profileStyles.tabButton} ${mediaType === 'anime' ? profileStyles.activeTab : ''}`}\n  //             onClick={() => setMediaType('anime')}\n  //           >\n  //             Anime\n  //           </button>\n  //           <button\n  //             className={`${profileStyles.tabButton} ${mediaType === 'manga' ? profileStyles.activeTab : ''}`}\n  //             onClick={() => setMediaType('manga')}\n  //           >\n  //             Manga\n  //           </button>\n  //         </div>\n\n  //         {renderLayoutControls()}\n  //       </div>\n\n  //       <div className={profileStyles.statusTabs}>\n  //         <button\n  //           className={`${profileStyles.statusTab} ${statusType === 'watching' ? profileStyles.activeStatus : ''}`}\n  //           onClick={() => setStatusType('watching')}\n  //         >\n  //           {mediaType === 'anime' ? 'Watching' : 'Reading'}\n  //         </button>\n  //         <button\n  //           className={`${profileStyles.statusTab} ${statusType === 'planning' ? profileStyles.activeStatus : ''}`}\n  //           onClick={() => setStatusType('planning')}\n  //         >\n  //           Planning\n  //         </button>\n  //         <button\n  //           className={`${profileStyles.statusTab} ${statusType === 'completed' ? profileStyles.activeStatus : ''}`}\n  //           onClick={() => setStatusType('completed')}\n  //         >\n  //           Completed\n  //         </button>\n  //       </div>\n\n  //       {error && (\n  //         <div className={profileStyles.error}>\n  //           {error}\n  //         </div>\n  //       )}\n\n  //       {isLoading ? (\n  //         <div className={profileStyles.loading}>Loading...</div>\n  //       ) : (\n  //         <div className={`${profileStyles.contentGrid} ${profileStyles[gridLayout]}`}>\n  //           {filteredMediaList.map((item) => (\n  //             mediaType === 'anime' ? (\n  //               <UserAnimeCard\n  //                 key={item.animeId}\n  //                 anime={item.mediaDetails}\n  //                 name={getTitle(item.mediaDetails.titles)}\n  //                 layout={gridLayout}\n  //                 userProgress={item.currentEpisode}\n  //                 userStatus={item.status}\n  //                 onProgressUpdate={(newProgress) => \n  //                   handleProgressUpdate(item.animeId, newProgress)\n  //                 }\n  //               />\n  //             ) : (\n  //               <MangaCard\n  //                 key={item.mangaId}\n  //                 manga={item.mediaDetails}\n  //                 name={getTitle(item.mediaDetails.titles)}\n  //                 layout={gridLayout}\n  //                 userProgress={item.currentChapter}\n  //                 onProgressUpdate={(newProgress) => \n  //                   handleProgressUpdate(item.mangaId, newProgress)\n  //                 }\n  //               />\n  //             )\n  //           ))}\n  //         </div>\n  //       )}\n  //     </div>\n  //   </div>\n  // );\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: profileStyles.profilePage,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: profileStyles.profileHeader,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: profileStyles.userInfo,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: profileStyles.avatarContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: profileStyles.avatar,\n            children: (_userData$username = userData.username) === null || _userData$username === void 0 ? void 0 : _userData$username.charAt(0).toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: profileStyles.userDetails,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: userData.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Member since \", new Date(userData.createdAt).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: profileStyles.statsContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: profileStyles.statCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Anime Stats\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: profileStyles.statValue,\n            children: [((_userData$animes = userData.animes) === null || _userData$animes === void 0 ? void 0 : _userData$animes.length) || 0, \" Total\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: profileStyles.statCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Manga Stats\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: profileStyles.statValue,\n            children: [((_userData$mangas = userData.mangas) === null || _userData$mangas === void 0 ? void 0 : _userData$mangas.length) || 0, \" Total\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: profileStyles.controls,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: profileStyles.tabContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${profileStyles.tabButton} ${mediaType === 'anime' ? profileStyles.activeTab : ''}`,\n          onClick: () => setMediaType('anime'),\n          children: \"Anime\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${profileStyles.tabButton} ${mediaType === 'manga' ? profileStyles.activeTab : ''}`,\n          onClick: () => setMediaType('manga'),\n          children: \"Manga\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: profileStyles.searchContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: `Search ${mediaType}...`,\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          className: profileStyles.searchInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          multiple: true,\n          value: selectedGenres,\n          onChange: e => {\n            const values = Array.from(e.target.selectedOptions, option => option.value);\n            setSelectedGenres(values);\n          },\n          className: profileStyles.genreSelect,\n          children: (mediaType === 'anime' ? ANIME_GENRES : MANGA_GENRES).map(genre => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: genre,\n            children: genre\n          }, genre, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LayoutControls, {\n        currentLayout: gridLayout,\n        onLayoutChange: setGridLayout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: profileStyles.error,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: profileStyles.loading,\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: profileStyles.contentSection,\n      children: statusOrder.map(status => {\n        const items = organizedMediaList[status] || [];\n        if (items.length === 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: profileStyles.statusSection,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: profileStyles.statusTitle,\n            children: [status, \" (\", items.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${profileStyles.contentGrid} ${profileStyles[gridLayout]}`,\n            children: items.map(item => mediaType === 'anime' ? /*#__PURE__*/_jsxDEV(UserAnimeCard, {\n              anime: item.mediaDetails,\n              name: getTitle(item.mediaDetails.titles),\n              layout: gridLayout,\n              userProgress: item.currentEpisode,\n              userStatus: item.status,\n              onProgressUpdate: newProgress => handleProgressUpdate(item.animeId, newProgress)\n            }, item.animeId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(MangaCard, {\n              manga: item.mediaDetails,\n              name: getTitle(item.mediaDetails.titles),\n              layout: gridLayout,\n              userProgress: item.currentChapter,\n              onProgressUpdate: newProgress => handleProgressUpdate(item.mangaId, newProgress)\n            }, item.mangaId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 17\n          }, this)]\n        }, status, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 288,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"T6woU/tNYLuEUfw0BvlcLLKRVbU=\", false, function () {\n  return [useAnimeContext, useMangaContext];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useCallback","useMemo","Link","axiosInstance","profileStyles","data","useAnimeContext","useMangaContext","fetchWithErrorHandling","UserAnimeCard","MangaCard","jsxDEV","_jsxDEV","Profile","_s","_userData$username","_userData$animes","_userData$mangas","animeList","mangaList","userData","mediaType","setMediaType","statusType","setStatusType","userAnimeList","setUserAnimeList","userMangaList","setUserMangaList","isLoading","setIsLoading","gridLayout","setGridLayout","error","setError","searchQuery","setSearchQuery","selectedGenres","setSelectedGenres","showAllStatuses","setShowAllStatuses","changeLayout","layout","fetchUserList","_id","animes","mangas","length","getMediaById","mediaId","type","find","anime","manga","filteredMediaList","list","statusMap","filter","item","status","map","mediaDetails","animeId","mangaId","handleProgressUpdate","id","newProgress","isAnime","currentList","currentItem","updateList","progressField","prevList","endpoint","post","currentVolume","filterMedia","title","getTitle","titles","toLowerCase","matchesSearch","includes","matchesGenres","every","genre","_mediaDetails$genres","genres","some","g","organizedMediaList","filtered","reduce","acc","push","statusOrder","preference","titleMap","english","romaji","native","renderLayoutControls","className","layoutControls","children","onClick","layoutButton","fileName","_jsxFileName","lineNumber","columnNumber","profilePage","profileHeader","userInfo","avatarContainer","avatar","username","charAt","toUpperCase","userDetails","Date","createdAt","toLocaleDateString","statsContainer","statCard","statValue","controls","tabContainer","tabButton","activeTab","searchContainer","placeholder","value","onChange","e","target","searchInput","multiple","values","Array","from","selectedOptions","option","genreSelect","ANIME_GENRES","MANGA_GENRES","LayoutControls","currentLayout","onLayoutChange","loading","contentSection","items","statusSection","statusTitle","contentGrid","name","userProgress","currentEpisode","userStatus","onProgressUpdate","currentChapter","_c","$RefreshReg$"],"sources":["C:/Users/david/Documents/anime_website/anime_website/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useContext, useEffect, useState, useCallback, useMemo } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axiosInstance from '../utils/axiosConfig';\r\nimport profileStyles from '../styles/pages/Profile.module.css';\r\nimport data from '../Context/ContextApi';\r\nimport { useAnimeContext } from '../Context/AnimeContext';\r\nimport { useMangaContext } from '../Context/MangaContext';\r\nimport { fetchWithErrorHandling } from '../utils/apiUtils';\r\nimport UserAnimeCard from '../cards/userAnimeCard';\r\nimport MangaCard from '../cards/MangaCard';\r\n\r\nconst Profile = () => {\r\n  const { animeList } = useAnimeContext();\r\n  const { mangaList } = useMangaContext();\r\n  const { userData } = useContext(data);\r\n  const [mediaType, setMediaType] = useState('anime');\r\n  const [statusType, setStatusType] = useState('watching');\r\n  const [userAnimeList, setUserAnimeList] = useState([]);\r\n  const [userMangaList, setUserMangaList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [gridLayout, setGridLayout] = useState('grid');\r\n  const [error, setError] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedGenres, setSelectedGenres] = useState([]);\r\n  const [showAllStatuses, setShowAllStatuses] = useState(true);\r\n\r\n  const changeLayout = (layout) => setGridLayout(layout);\r\n\r\n  const fetchUserList = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      const data = await fetchWithErrorHandling(`/users/${userData._id}/current`);\r\n      setUserAnimeList(data.animes);\r\n      setUserMangaList(data.mangas);\r\n    } catch (error) {\r\n      setError('Failed to load user list. Please try again later.');\r\n      setUserAnimeList([]);\r\n      setUserMangaList([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [userData._id]);\r\n\r\n  useEffect(() => {\r\n    if (userData._id && animeList?.length && mangaList?.length) {\r\n      fetchUserList();\r\n    }\r\n  }, [userData._id, animeList, mangaList, fetchUserList]);\r\n\r\n  const getMediaById = useCallback((mediaId, type) => {\r\n    return type === 'anime' \r\n      ? animeList?.find((anime) => anime._id === mediaId)\r\n      : mangaList?.find((manga) => manga._id === mediaId);\r\n  }, [animeList, mangaList]);\r\n\r\n  const filteredMediaList = useMemo(() => {\r\n    const list = mediaType === 'anime' ? userAnimeList : userMangaList;\r\n    if (!list.length) return [];\r\n    \r\n    const statusMap = {\r\n      'watching': mediaType === 'anime' ? 'Watching' : 'Reading',\r\n      'planning': 'Planning',\r\n      'completed': 'Completed'\r\n    };\r\n    \r\n    return list\r\n      .filter((item) => item.status === statusMap[statusType])\r\n      .map((item) => ({\r\n        ...item,\r\n        mediaDetails: getMediaById(\r\n          mediaType === 'anime' ? item.animeId : item.mangaId,\r\n          mediaType\r\n        ),\r\n      }));\r\n  }, [userAnimeList, userMangaList, statusType, getMediaById, mediaType]);\r\n\r\n  const handleProgressUpdate = async (id, newProgress) => {\r\n    const isAnime = mediaType === 'anime';\r\n    const currentList = isAnime ? userAnimeList : userMangaList;\r\n    const currentItem = currentList.find(item => \r\n      isAnime ? item.animeId === id : item.mangaId === id\r\n    );\r\n\r\n    if (!currentItem) return;\r\n\r\n    const updateList = isAnime ? setUserAnimeList : setUserMangaList;\r\n    const progressField = isAnime ? 'currentEpisode' : 'currentChapter';\r\n\r\n    try {\r\n      updateList(prevList =>\r\n        prevList.map(item =>\r\n          (isAnime ? item.animeId : item.mangaId) === id\r\n            ? { ...item, [progressField]: newProgress }\r\n            : item\r\n        )\r\n      );\r\n\r\n      const endpoint = isAnime \r\n        ? `/users/${userData._id}/updateAnime`\r\n        : `/users/${userData._id}/updateManga`;\r\n\r\n      await axiosInstance.post(endpoint, {\r\n        [isAnime ? 'animeId' : 'mangaId']: id,\r\n        status: currentItem.status,\r\n        [progressField]: newProgress,\r\n        ...(isAnime ? {} : { currentVolume: currentItem.currentVolume })\r\n      });\r\n    } catch (error) {\r\n      setError(`Failed to update ${mediaType} progress. Please try again.`);\r\n      // Revert the optimistic update\r\n      fetchUserList();\r\n    }\r\n  };\r\n\r\n  const filterMedia = (item) => {\r\n    const mediaDetails = getMediaById(\r\n      mediaType === 'anime' ? item.animeId : item.mangaId,\r\n      mediaType\r\n    );\r\n    \r\n    if (!mediaDetails) return false;\r\n\r\n    const title = getTitle(mediaDetails.titles).toLowerCase();\r\n    const matchesSearch = searchQuery === '' || title.includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesGenres = selectedGenres.length === 0 || \r\n      selectedGenres.every(genre => \r\n        mediaDetails.genres?.some(g => g.toLowerCase() === genre.toLowerCase())\r\n      );\r\n\r\n    return matchesSearch && matchesGenres;\r\n  };\r\n\r\n  const organizedMediaList = useMemo(() => {\r\n    const list = mediaType === 'anime' ? userAnimeList : userMangaList;\r\n    if (!list.length) return {};\r\n\r\n    const filtered = list.filter(filterMedia);\r\n    \r\n    return filtered.reduce((acc, item) => {\r\n      const status = item.status;\r\n      if (!acc[status]) {\r\n        acc[status] = [];\r\n      }\r\n      acc[status].push(item);\r\n      return acc;\r\n    }, {});\r\n  }, [userAnimeList, userMangaList, mediaType, searchQuery, selectedGenres]);\r\n\r\n  const statusOrder = [\r\n    mediaType === 'anime' ? 'Watching' : 'Reading',\r\n    'Completed',\r\n    'Planning'\r\n  ];\r\n\r\n  const getTitle = (titles) => {\r\n    const preference = userData.title || 'english';\r\n    const titleMap = {\r\n      'english': titles.english,\r\n      'romaji': titles.romaji,\r\n      'native': titles.native\r\n    };\r\n    return titleMap[preference] || titles.english || titles.romaji || titles.native;\r\n  };\r\n\r\n  const renderLayoutControls = () => (\r\n    <div className={profileStyles.layoutControls}>\r\n      <button onClick={() => changeLayout('grid')} className={profileStyles.layoutButton}>Grid</button>\r\n      <button onClick={() => changeLayout('wide')} className={profileStyles.layoutButton}>Wide</button>\r\n      <button onClick={() => changeLayout('compact')} className={profileStyles.layoutButton}>Compact</button>\r\n    </div>\r\n  );\r\n\r\n  // return (\r\n  //   <div className={profileStyles.profilePage}>\r\n  //     <div className={profileStyles.profileHeader}>\r\n  //       <div className={profileStyles.userInfo}>\r\n  //         <div className={profileStyles.avatarContainer}>\r\n  //           <div className={profileStyles.avatar}>\r\n  //             {userData.username?.charAt(0).toUpperCase()}\r\n  //           </div>\r\n  //         </div>\r\n  //         <div className={profileStyles.userDetails}>\r\n  //           <h1>{userData.username}</h1>\r\n  //           <p>Member since {new Date(userData.createdAt).toLocaleDateString()}</p>\r\n  //         </div>\r\n  //       </div>\r\n  //       <div className={profileStyles.statsContainer}>\r\n  //         <div className={profileStyles.statCard}>\r\n  //           <h3>Anime Stats</h3>\r\n  //           <div className={profileStyles.statValue}>\r\n  //             {userData.animes?.length || 0} Total\r\n  //           </div>\r\n  //         </div>\r\n  //         <div className={profileStyles.statCard}>\r\n  //           <h3>Manga Stats</h3>\r\n  //           <div className={profileStyles.statValue}>\r\n  //             {userData.mangas?.length || 0} Total\r\n  //           </div>\r\n  //         </div>\r\n  //       </div>\r\n  //     </div>\r\n\r\n  //     <div className={profileStyles.contentSection}>\r\n  //       <div className={profileStyles.controls}>\r\n  //         <div className={profileStyles.tabContainer}>\r\n  //           <button\r\n  //             className={`${profileStyles.tabButton} ${mediaType === 'anime' ? profileStyles.activeTab : ''}`}\r\n  //             onClick={() => setMediaType('anime')}\r\n  //           >\r\n  //             Anime\r\n  //           </button>\r\n  //           <button\r\n  //             className={`${profileStyles.tabButton} ${mediaType === 'manga' ? profileStyles.activeTab : ''}`}\r\n  //             onClick={() => setMediaType('manga')}\r\n  //           >\r\n  //             Manga\r\n  //           </button>\r\n  //         </div>\r\n\r\n  //         {renderLayoutControls()}\r\n  //       </div>\r\n\r\n  //       <div className={profileStyles.statusTabs}>\r\n  //         <button\r\n  //           className={`${profileStyles.statusTab} ${statusType === 'watching' ? profileStyles.activeStatus : ''}`}\r\n  //           onClick={() => setStatusType('watching')}\r\n  //         >\r\n  //           {mediaType === 'anime' ? 'Watching' : 'Reading'}\r\n  //         </button>\r\n  //         <button\r\n  //           className={`${profileStyles.statusTab} ${statusType === 'planning' ? profileStyles.activeStatus : ''}`}\r\n  //           onClick={() => setStatusType('planning')}\r\n  //         >\r\n  //           Planning\r\n  //         </button>\r\n  //         <button\r\n  //           className={`${profileStyles.statusTab} ${statusType === 'completed' ? profileStyles.activeStatus : ''}`}\r\n  //           onClick={() => setStatusType('completed')}\r\n  //         >\r\n  //           Completed\r\n  //         </button>\r\n  //       </div>\r\n\r\n  //       {error && (\r\n  //         <div className={profileStyles.error}>\r\n  //           {error}\r\n  //         </div>\r\n  //       )}\r\n\r\n  //       {isLoading ? (\r\n  //         <div className={profileStyles.loading}>Loading...</div>\r\n  //       ) : (\r\n  //         <div className={`${profileStyles.contentGrid} ${profileStyles[gridLayout]}`}>\r\n  //           {filteredMediaList.map((item) => (\r\n  //             mediaType === 'anime' ? (\r\n  //               <UserAnimeCard\r\n  //                 key={item.animeId}\r\n  //                 anime={item.mediaDetails}\r\n  //                 name={getTitle(item.mediaDetails.titles)}\r\n  //                 layout={gridLayout}\r\n  //                 userProgress={item.currentEpisode}\r\n  //                 userStatus={item.status}\r\n  //                 onProgressUpdate={(newProgress) => \r\n  //                   handleProgressUpdate(item.animeId, newProgress)\r\n  //                 }\r\n  //               />\r\n  //             ) : (\r\n  //               <MangaCard\r\n  //                 key={item.mangaId}\r\n  //                 manga={item.mediaDetails}\r\n  //                 name={getTitle(item.mediaDetails.titles)}\r\n  //                 layout={gridLayout}\r\n  //                 userProgress={item.currentChapter}\r\n  //                 onProgressUpdate={(newProgress) => \r\n  //                   handleProgressUpdate(item.mangaId, newProgress)\r\n  //                 }\r\n  //               />\r\n  //             )\r\n  //           ))}\r\n  //         </div>\r\n  //       )}\r\n  //     </div>\r\n  //   </div>\r\n  // );\r\n  return (\r\n    <div className={profileStyles.profilePage}>\r\n      <div className={profileStyles.profileHeader}>\r\n        <div className={profileStyles.userInfo}>\r\n          <div className={profileStyles.avatarContainer}>\r\n            <div className={profileStyles.avatar}>\r\n              {userData.username?.charAt(0).toUpperCase()}\r\n            </div>\r\n          </div>\r\n          <div className={profileStyles.userDetails}>\r\n            <h1>{userData.username}</h1>\r\n            <p>Member since {new Date(userData.createdAt).toLocaleDateString()}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={profileStyles.statsContainer}>\r\n          <div className={profileStyles.statCard}>\r\n            <h3>Anime Stats</h3>\r\n            <div className={profileStyles.statValue}>\r\n              {userData.animes?.length || 0} Total\r\n            </div>\r\n          </div>\r\n          <div className={profileStyles.statCard}>\r\n            <h3>Manga Stats</h3>\r\n            <div className={profileStyles.statValue}>\r\n              {userData.mangas?.length || 0} Total\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={profileStyles.controls}>\r\n        <div className={profileStyles.tabContainer}>\r\n          <button\r\n            className={`${profileStyles.tabButton} ${mediaType === 'anime' ? profileStyles.activeTab : ''}`}\r\n            onClick={() => setMediaType('anime')}\r\n          >\r\n            Anime\r\n          </button>\r\n          <button\r\n            className={`${profileStyles.tabButton} ${mediaType === 'manga' ? profileStyles.activeTab : ''}`}\r\n            onClick={() => setMediaType('manga')}\r\n          >\r\n            Manga\r\n          </button>\r\n        </div>\r\n\r\n        <div className={profileStyles.searchContainer}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={`Search ${mediaType}...`}\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className={profileStyles.searchInput}\r\n          />\r\n          \r\n          <select\r\n            multiple\r\n            value={selectedGenres}\r\n            onChange={(e) => {\r\n              const values = Array.from(e.target.selectedOptions, option => option.value);\r\n              setSelectedGenres(values);\r\n            }}\r\n            className={profileStyles.genreSelect}\r\n          >\r\n            {(mediaType === 'anime' ? ANIME_GENRES : MANGA_GENRES).map(genre => (\r\n              <option key={genre} value={genre}>{genre}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <LayoutControls \r\n          currentLayout={gridLayout}\r\n          onLayoutChange={setGridLayout}\r\n        />\r\n      </div>\r\n\r\n      {error && (\r\n        <div className={profileStyles.error}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {isLoading ? (\r\n        <div className={profileStyles.loading}>Loading...</div>\r\n      ) : (\r\n        <div className={profileStyles.contentSection}>\r\n          {statusOrder.map(status => {\r\n            const items = organizedMediaList[status] || [];\r\n            if (items.length === 0) return null;\r\n\r\n            return (\r\n              <div key={status} className={profileStyles.statusSection}>\r\n                <h2 className={profileStyles.statusTitle}>\r\n                  {status} ({items.length})\r\n                </h2>\r\n                <div className={`${profileStyles.contentGrid} ${profileStyles[gridLayout]}`}>\r\n                  {items.map((item) => (\r\n                    mediaType === 'anime' ? (\r\n                      <UserAnimeCard\r\n                        key={item.animeId}\r\n                        anime={item.mediaDetails}\r\n                        name={getTitle(item.mediaDetails.titles)}\r\n                        layout={gridLayout}\r\n                        userProgress={item.currentEpisode}\r\n                        userStatus={item.status}\r\n                        onProgressUpdate={(newProgress) => \r\n                          handleProgressUpdate(item.animeId, newProgress)\r\n                        }\r\n                      />\r\n                    ) : (\r\n                      <MangaCard\r\n                        key={item.mangaId}\r\n                        manga={item.mediaDetails}\r\n                        name={getTitle(item.mediaDetails.titles)}\r\n                        layout={gridLayout}\r\n                        userProgress={item.currentChapter}\r\n                        onProgressUpdate={(newProgress) => \r\n                          handleProgressUpdate(item.mangaId, newProgress)\r\n                        }\r\n                      />\r\n                    )\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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,YAAa;MAAAF,QAAA,EAAC;IAAI;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACjGlG,OAAA;MAAQ6F,OAAO,EAAEA,CAAA,KAAMhE,YAAY,CAAC,MAAM,CAAE;MAAC6D,SAAS,EAAElG,aAAa,CAACsG,YAAa;MAAAF,QAAA,EAAC;IAAI;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACjGlG,OAAA;MAAQ6F,OAAO,EAAEA,CAAA,KAAMhE,YAAY,CAAC,SAAS,CAAE;MAAC6D,SAAS,EAAElG,aAAa,CAACsG,YAAa;MAAAF,QAAA,EAAC;IAAO;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpG,CACN;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,oBACElG,OAAA;IAAK0F,SAAS,EAAElG,aAAa,CAAC2G,WAAY;IAAAP,QAAA,gBACxC5F,OAAA;MAAK0F,SAAS,EAAElG,aAAa,CAAC4G,aAAc;MAAAR,QAAA,gBAC1C5F,OAAA;QAAK0F,SAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}